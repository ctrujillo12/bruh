ARM GAS  C:\msys64\tmp\ccZKziyy.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"i2s_audio.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "Core/Src/i2s_audio.c"
  19              		.section	.text.MX_I2S2_Init,"ax",%progbits
  20              		.align	1
  21              		.global	MX_I2S2_Init
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	MX_I2S2_Init:
  27              	.LFB147:
   1:Core/Src/i2s_audio.c **** #include "i2s_audio.h"
   2:Core/Src/i2s_audio.c **** #include "stm32h7xx_hal_i2s.h"
   3:Core/Src/i2s_audio.c **** 
   4:Core/Src/i2s_audio.c **** extern I2S_HandleTypeDef hi2s2;
   5:Core/Src/i2s_audio.c **** 
   6:Core/Src/i2s_audio.c **** // Example 16-bit stereo test tone buffer (dummy data)
   7:Core/Src/i2s_audio.c **** uint16_t i2s_tx_buf[32] = {
   8:Core/Src/i2s_audio.c ****     0x0000, 0x7FFF, 0xFFFF, 0x8000, // square-ish wave pattern
   9:Core/Src/i2s_audio.c ****     0x0000, 0x7FFF, 0xFFFF, 0x8000,
  10:Core/Src/i2s_audio.c ****     0x0000, 0x7FFF, 0xFFFF, 0x8000,
  11:Core/Src/i2s_audio.c ****     0x0000, 0x7FFF, 0xFFFF, 0x8000
  12:Core/Src/i2s_audio.c **** };
  13:Core/Src/i2s_audio.c **** 
  14:Core/Src/i2s_audio.c **** void MX_I2S2_Init(void)
  15:Core/Src/i2s_audio.c **** {
  28              		.loc 1 15 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
  16:Core/Src/i2s_audio.c ****     hi2s2.Instance = SPI2;   // SPI2/I2S2 block
  37              		.loc 1 16 5 view .LVU1
  38              		.loc 1 16 20 is_stmt 0 view .LVU2
  39 0002 0B48     		ldr	r0, .L5
  40 0004 0B4B     		ldr	r3, .L5+4
  41 0006 0360     		str	r3, [r0]
  17:Core/Src/i2s_audio.c ****     hi2s2.Init.Mode = I2S_MODE_MASTER_TX;
ARM GAS  C:\msys64\tmp\ccZKziyy.s 			page 2


  42              		.loc 1 17 5 is_stmt 1 view .LVU3
  43              		.loc 1 17 21 is_stmt 0 view .LVU4
  44 0008 0423     		movs	r3, #4
  45 000a 4360     		str	r3, [r0, #4]
  18:Core/Src/i2s_audio.c ****     hi2s2.Init.Standard = I2S_STANDARD_PHILIPS;
  46              		.loc 1 18 5 is_stmt 1 view .LVU5
  47              		.loc 1 18 25 is_stmt 0 view .LVU6
  48 000c 0023     		movs	r3, #0
  49 000e 8360     		str	r3, [r0, #8]
  19:Core/Src/i2s_audio.c ****     hi2s2.Init.DataFormat = I2S_DATAFORMAT_16B;
  50              		.loc 1 19 5 is_stmt 1 view .LVU7
  51              		.loc 1 19 27 is_stmt 0 view .LVU8
  52 0010 C360     		str	r3, [r0, #12]
  20:Core/Src/i2s_audio.c ****     hi2s2.Init.MCLKOutput = I2S_MCLKOUTPUT_ENABLE;
  53              		.loc 1 20 5 is_stmt 1 view .LVU9
  54              		.loc 1 20 27 is_stmt 0 view .LVU10
  55 0012 4FF00072 		mov	r2, #33554432
  56 0016 0261     		str	r2, [r0, #16]
  21:Core/Src/i2s_audio.c ****     hi2s2.Init.AudioFreq = I2S_AUDIOFREQ_44K;
  57              		.loc 1 21 5 is_stmt 1 view .LVU11
  58              		.loc 1 21 26 is_stmt 0 view .LVU12
  59 0018 4AF64442 		movw	r2, #44100
  60 001c 4261     		str	r2, [r0, #20]
  22:Core/Src/i2s_audio.c ****     hi2s2.Init.CPOL = I2S_CPOL_LOW;
  61              		.loc 1 22 5 is_stmt 1 view .LVU13
  62              		.loc 1 22 21 is_stmt 0 view .LVU14
  63 001e 8361     		str	r3, [r0, #24]
  23:Core/Src/i2s_audio.c ****     // hi2s2.Init.ClockSource = I2S_CLOCK_PLL;
  24:Core/Src/i2s_audio.c ****     // hi2s2.Init.FullDuplexMode = I2S_FULLDUPLEXMODE_DISABLE;
  25:Core/Src/i2s_audio.c ****     if (HAL_I2S_Init(&hi2s2) != HAL_OK)
  64              		.loc 1 25 5 is_stmt 1 view .LVU15
  65              		.loc 1 25 9 is_stmt 0 view .LVU16
  66 0020 FFF7FEFF 		bl	HAL_I2S_Init
  67              	.LVL0:
  68              		.loc 1 25 8 discriminator 1 view .LVU17
  69 0024 00B9     		cbnz	r0, .L4
  70              	.L1:
  26:Core/Src/i2s_audio.c ****     {
  27:Core/Src/i2s_audio.c ****         Error_Handler();
  28:Core/Src/i2s_audio.c ****     }
  29:Core/Src/i2s_audio.c **** }
  71              		.loc 1 29 1 view .LVU18
  72 0026 08BD     		pop	{r3, pc}
  73              	.L4:
  27:Core/Src/i2s_audio.c ****     }
  74              		.loc 1 27 9 is_stmt 1 view .LVU19
  75 0028 FFF7FEFF 		bl	Error_Handler
  76              	.LVL1:
  77              		.loc 1 29 1 is_stmt 0 view .LVU20
  78 002c FBE7     		b	.L1
  79              	.L6:
  80 002e 00BF     		.align	2
  81              	.L5:
  82 0030 00000000 		.word	hi2s2
  83 0034 00380040 		.word	1073756160
  84              		.cfi_endproc
  85              	.LFE147:
ARM GAS  C:\msys64\tmp\ccZKziyy.s 			page 3


  87              		.section	.text.i2s_audio_start,"ax",%progbits
  88              		.align	1
  89              		.global	i2s_audio_start
  90              		.syntax unified
  91              		.thumb
  92              		.thumb_func
  94              	i2s_audio_start:
  95              	.LFB148:
  30:Core/Src/i2s_audio.c **** 
  31:Core/Src/i2s_audio.c **** void i2s_audio_start(void)
  32:Core/Src/i2s_audio.c **** {
  96              		.loc 1 32 1 is_stmt 1 view -0
  97              		.cfi_startproc
  98              		@ args = 0, pretend = 0, frame = 0
  99              		@ frame_needed = 0, uses_anonymous_args = 0
 100 0000 08B5     		push	{r3, lr}
 101              	.LCFI1:
 102              		.cfi_def_cfa_offset 8
 103              		.cfi_offset 3, -8
 104              		.cfi_offset 14, -4
  33:Core/Src/i2s_audio.c ****     // Kick off DMA transfer (looping static buffer)
  34:Core/Src/i2s_audio.c ****     HAL_I2S_Transmit_DMA(&hi2s2, i2s_tx_buf, sizeof(i2s_tx_buf)/sizeof(uint16_t));
 105              		.loc 1 34 5 view .LVU22
 106 0002 2022     		movs	r2, #32
 107 0004 0249     		ldr	r1, .L9
 108 0006 0348     		ldr	r0, .L9+4
 109 0008 FFF7FEFF 		bl	HAL_I2S_Transmit_DMA
 110              	.LVL2:
  35:Core/Src/i2s_audio.c **** }
 111              		.loc 1 35 1 is_stmt 0 view .LVU23
 112 000c 08BD     		pop	{r3, pc}
 113              	.L10:
 114 000e 00BF     		.align	2
 115              	.L9:
 116 0010 00000000 		.word	i2s_tx_buf
 117 0014 00000000 		.word	hi2s2
 118              		.cfi_endproc
 119              	.LFE148:
 121              		.global	i2s_tx_buf
 122              		.section	.data.i2s_tx_buf,"aw"
 123              		.align	2
 126              	i2s_tx_buf:
 127 0000 0000     		.short	0
 128 0002 FF7F     		.short	32767
 129 0004 FFFF     		.short	-1
 130 0006 0080     		.short	-32768
 131 0008 0000     		.short	0
 132 000a FF7F     		.short	32767
 133 000c FFFF     		.short	-1
 134 000e 0080     		.short	-32768
 135 0010 0000     		.short	0
 136 0012 FF7F     		.short	32767
 137 0014 FFFF     		.short	-1
 138 0016 0080     		.short	-32768
 139 0018 0000     		.short	0
 140 001a FF7F     		.short	32767
 141 001c FFFF     		.short	-1
ARM GAS  C:\msys64\tmp\ccZKziyy.s 			page 4


 142 001e 0080     		.short	-32768
 143 0020 00000000 		.space	32
 143      00000000 
 143      00000000 
 143      00000000 
 143      00000000 
 144              		.text
 145              	.Letext0:
 146              		.file 2 "C:/Program Files (x86)/Arm GNU Toolchain arm-none-eabi/14.3 rel1/arm-none-eabi/include/ma
 147              		.file 3 "C:/Program Files (x86)/Arm GNU Toolchain arm-none-eabi/14.3 rel1/arm-none-eabi/include/sy
 148              		.file 4 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h723xx.h"
 149              		.file 5 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 150              		.file 6 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_dma.h"
 151              		.file 7 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_i2s.h"
 152              		.file 8 "Core/Inc/main.h"
ARM GAS  C:\msys64\tmp\ccZKziyy.s 			page 5


DEFINED SYMBOLS
                            *ABS*:00000000 i2s_audio.c
C:\msys64\tmp\ccZKziyy.s:20     .text.MX_I2S2_Init:00000000 $t
C:\msys64\tmp\ccZKziyy.s:26     .text.MX_I2S2_Init:00000000 MX_I2S2_Init
C:\msys64\tmp\ccZKziyy.s:82     .text.MX_I2S2_Init:00000030 $d
C:\msys64\tmp\ccZKziyy.s:88     .text.i2s_audio_start:00000000 $t
C:\msys64\tmp\ccZKziyy.s:94     .text.i2s_audio_start:00000000 i2s_audio_start
C:\msys64\tmp\ccZKziyy.s:116    .text.i2s_audio_start:00000010 $d
C:\msys64\tmp\ccZKziyy.s:126    .data.i2s_tx_buf:00000000 i2s_tx_buf
C:\msys64\tmp\ccZKziyy.s:123    .data.i2s_tx_buf:00000000 $d

UNDEFINED SYMBOLS
HAL_I2S_Init
Error_Handler
hi2s2
HAL_I2S_Transmit_DMA
